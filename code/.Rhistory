# load library
library(tidyverse)
library(readxl)
library(httr)
contagious_window <- 12
active_window <- 18
DATA_URL = "https://raw.githubusercontent.com/OxCGRT/covid-policy-tracker/master/data/OxCGRT_latest.csv"
data_ox <- read.csv(DATA_URL)
cat("::- script-confirmed: Oxford data available! ::\n")
jurisdictions <- unique(data_ox$Jurisdiction)
jurisdictions
source('~/github/xprize/code/script-confirmed2.R', echo=TRUE)
source('~/github/xprize/code/script-confirmed2.R', echo=TRUE)
source('~/github/xprize/code/script-confirmed2.R', echo=TRUE)
source('~/github/xprize/code/script-confirmed2.R', echo=TRUE)
source('~/github/xprize/code/script-confirmed2.R', echo=TRUE)
source('~/github/xprize/code/script-confirmed2.R', echo=TRUE)
source('~/github/xprize/code/script-confirmed2.R', echo=TRUE)
source('~/github/xprize/code/script-confirmed2.R', echo=TRUE)
source('~/github/xprize/code/script-confirmed2.R', echo=TRUE)
source('~/github/xprize/code/script-confirmed2.R', echo=TRUE)
source('~/github/xprize/code/script-get-oxford-data.R', echo=TRUE)
source('~/github/xprize/code/script-get-oxford-data.R', echo=TRUE)
source('~/github/xprize/code/corona_surveys_estimate.R', echo=TRUE)
source('~/github/xprize/code/corona_surveys_estimate.R', echo=TRUE)
source('~/github/xprize/code/script-get-oxford-data.R', echo=TRUE)
source('~/github/xprize/code/script-get-oxford-data.R', echo=TRUE)
source('~/github/xprize/code/script-get-oxford-data.R', echo=TRUE)
source('~/github/xprize/code/script-umd_batch_symptom_country.R', echo=TRUE)
source('~/github/xprize/code/script-umd_batch_symptom_country.R', echo=TRUE)
source('~/github/xprize/code/script-umd_batch_symptom_country.R', echo=TRUE)
source('~/github/xprize/code/script-umd_batch_symptom_country.R', echo=TRUE)
source('~/github/xprize/code/script-umd_batch_symptom_country.R', echo=TRUE)
source('~/github/xprize/code/script-umd_batch_symptom_country.R', echo=TRUE)
source('~/github/xprize/code/script-get-oxford-data.R', echo=TRUE)
source('~/github/xprize/code/script-get-oxford-data.R', echo=TRUE)
source('~/github/xprize/code/script-umd_batch_symptom_country.R', echo=TRUE)
source('~/github/xprize/code/script-umd_batch_symptom_country.R', echo=TRUE)
source('~/github/xprize/code/script-umd_batch_symptom_country.R', echo=TRUE)
source('~/github/xprize/code/script-umd_batch_symptom_country.R', echo=TRUE)
source('~/github/xprize/code/script-umd_batch_symptom_country.R', echo=TRUE)
source('~/github/xprize/code/script-umd_batch_symptom_country.R', echo=TRUE)
source('~/github/xprize/code/script-umd_batch_symptom_country.R', echo=TRUE)
source('~/github/xprize/code/script-umd_batch_symptom_country.R', echo=TRUE)
dt
source('~/github/xprize/code/script-umd_batch_symptom_country.R', echo=TRUE)
source('~/github/xprize/code/script-umd_batch_symptom_country.R', echo=TRUE)
## Libraries
library(dplyr)
library(ggplot2)
library(httr)
library(jsonlite)
library(stringr)
## Load smoothing function ----
source("smooth_column-v2.R")
## Function to extract updated data from UMD api: ----
UMD_api <- function(country, type = "daily", indicator = "covid", date_start = NA, date_end = NA){
country <- str_replace_all(country, " ", "%")
# first date available:
if (is.na(date_start)) {
request <- GET(url = paste0("https://covidmap.umd.edu/api/datesavail?country=",
country,"%"))
# make sure the content is encoded with 'UTF-8'
response <- content(request, as = "text", encoding = "UTF-8")
# now we can have a dataframe for use!
date_start <- fromJSON(response, flatten = TRUE) %>% data.frame()
date_start = min(date_start$data.survey_date)
}
# today:
if (is.na(date_end)) {
date_end = format(Sys.time(), "%Y%m%d")
}
# adding url
path <- paste0("https://covidmap.umd.edu/api/resources?indicator=", indicator,
"&type=", type,
"&country=", country,
"&daterange=", date_start, "-", date_end)
# request data from api
request <- GET(url = path)
# make sure the content is encoded with 'UTF-8'
response <- content(request, as = "text", encoding = "UTF-8")
# now we can have a dataframe for use!
coviddata <- fromJSON(response, flatten = TRUE) %>% data.frame()
return(coviddata)
}
country <- "Angola"
## Load data
# Indicator covid , flu , mask ,contact or finance
dt_covid <- UMD_api(country, indicator = "covid")
dt_covid
source('~/github/xprize/code/script-umd_batch_symptom_country.R', echo=TRUE)
source('~/github/xprize/code/script-umd_batch_symptom_country.R', echo=TRUE)
source('~/github/xprize/code/script-umd_batch_symptom_country.R', echo=TRUE)
source('~/github/xprize/code/script-umd_batch_symptom_country.R', echo=TRUE)
source('~/github/xprize/code/script-umd_batch_symptom_country.R', echo=TRUE)
source('~/github/xprize/code/script-umd_batch_symptom_country.R', echo=TRUE)
source('~/github/xprize/code/script-umd_batch_symptom_country.R', echo=TRUE)
source('~/github/xprize/code/script-umd_batch_symptom_country.R', echo=TRUE)
source('~/github/xprize/code/script-umd_batch_symptom_country.R', echo=TRUE)
source('~/github/xprize/code/script-umd_batch_symptom_country.R', echo=TRUE)
dt_aux
source('~/github/xprize/code/script-umd_batch_symptom_country.R', echo=TRUE)
source('~/github/xprize/code/script-umd_batch_symptom_country.R', echo=TRUE)
source('~/github/xprize/code/script-umd_batch_symptom_country.R', echo=TRUE)
source('~/github/xprize/code/script-umd_batch_symptom_country.R', echo=TRUE)
source('~/github/xprize/code/script-umd_batch_symptom_country.R', echo=TRUE)
source('~/github/xprize/code/script-get-umd-data-country.R', echo=TRUE)
source('~/github/xprize/code/script-get-umd-data-country.R', echo=TRUE)
